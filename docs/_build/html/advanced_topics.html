

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced Topics &mdash; Zoom Documentation 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Zoom Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme_link.html">Zoom Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog_link.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/cli.html">Zoom CLI</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Zoom Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Advanced Topics</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/advanced_topics.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-topics">
<h1>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="module-zoom.component">
<span id="zoom-component-module"></span><h2>zoom.component module<a class="headerlink" href="#module-zoom.component" title="Permalink to this headline">¶</a></h2>
<p>zoom.component</p>
<p>Components encapsulate all of the parts that are required to make a
component appear on a page.  This can include HTML, CSS and Javascript
parts and associated libraries.</p>
<p>Components parts are assembled in the way that kind of part
needs to be treated.  For example HTML parts are simply joined
together in order and returned.  CSS parts on the other hand are
joined together but any duplicate parts are ignored.</p>
<p>When a caller supplies JS or CSS as part of the component being assembled
these extra parts are submitted to the system to be included in thier
proper place within a response (typically a page template).</p>
<p>The Component object is currently experimental and is intended to be used
in future releases.</p>
<dl class="class">
<dt id="zoom.component.Component">
<em class="property">class </em><code class="descclassname">zoom.component.</code><code class="descname">Component</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.component.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>component of a page response</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Component</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">&lt;Component: {&#39;html&#39;: []}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">+=</span> <span class="s1">&#39;test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">&lt;Component: {&#39;html&#39;: [&#39;test&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">+=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">css</span><span class="o">=</span><span class="s1">&#39;mycss&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;mycss&#39;]), &#39;html&#39;: [&#39;test&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">+=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">css</span><span class="o">=</span><span class="s1">&#39;mycss&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;mycss&#39;]), &#39;html&#39;: [&#39;test&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">+=</span> <span class="s1">&#39;test2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">parts</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;css&#39;, OrderedSet([&#39;mycss&#39;])), (&#39;html&#39;, [&#39;test&#39;, &#39;test2&#39;])]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;test1&#39;</span> <span class="o">+</span> <span class="s1">&#39;test2&#39;</span>
<span class="go">&lt;Component: {&#39;html&#39;: [&#39;test1&#39;, &#39;test2&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;test1&#39;</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">css</span><span class="o">=</span><span class="s1">&#39;mycss&#39;</span><span class="p">)</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;mycss&#39;]), &#39;html&#39;: [&#39;test1&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test1&#39;</span><span class="p">,</span> <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test2&#39;</span><span class="p">))</span>
<span class="go">&lt;Component: {&#39;html&#39;: [&#39;test1&#39;, &#39;test2&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test1&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css1&#39;</span><span class="p">),</span>
<span class="gp">... </span>   <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test2&#39;</span><span class="p">,</span> <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test3&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css3&#39;</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;css1&#39;, &#39;css3&#39;]), &#39;html&#39;: [&#39;test1&#39;, &#39;test2&#39;, &#39;test3&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">((</span><span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test1&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css1&#39;</span><span class="p">),</span> <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test2&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css2&#39;</span><span class="p">)))</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;css1&#39;, &#39;css2&#39;]), &#39;html&#39;: [&#39;test1&#39;, &#39;test2&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Component</span><span class="p">(</span><span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test1&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css1&#39;</span><span class="p">),</span> <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test2&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css2&#39;</span><span class="p">))</span>
<span class="go">&lt;Component: {&#39;css&#39;: OrderedSet([&#39;css1&#39;, &#39;css2&#39;]), &#39;html&#39;: [&#39;test1&#39;, &#39;test2&#39;]}&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">parts</span> <span class="o">=</span> <span class="n">Component</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test1&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css1&#39;</span><span class="p">),</span> <span class="n">Component</span><span class="p">(</span><span class="s1">&#39;test2&#39;</span><span class="p">,</span> <span class="n">css</span><span class="o">=</span><span class="s1">&#39;css2&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
<span class="go">&#39;test1test2&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">page2</span> <span class="o">=</span> \
<span class="gp">... </span>   <span class="n">Component</span><span class="p">()</span> <span class="o">+</span> \
<span class="gp">... </span>   <span class="s1">&#39;&lt;h1&gt;Title&lt;/h1&gt;&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">css</span><span class="o">=</span><span class="s1">&#39;mycss&#39;</span><span class="p">)</span> <span class="o">+</span> \
<span class="gp">... </span>   <span class="nb">dict</span><span class="p">(</span><span class="n">js</span><span class="o">=</span><span class="s1">&#39;myjs&#39;</span><span class="p">)</span> <span class="o">+</span> \
<span class="gp">... </span>   <span class="s1">&#39;page body goes here&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>   <span class="s2">&quot;&lt;Component: {&#39;css&#39;: OrderedSet([&#39;mycss&#39;]), &quot;</span>
<span class="gp">... </span>   <span class="s2">&quot;&#39;html&#39;: [&#39;&lt;h1&gt;Title&lt;/h1&gt;&#39;, &#39;page body goes here&#39;], &quot;</span>
<span class="gp">... </span>   <span class="s2">&quot;&#39;js&#39;: OrderedSet([&#39;myjs&#39;])}&gt;&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#print(repr(page2) + &#39;\n&#39; + t)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">page2</span><span class="p">)</span> <span class="o">==</span> <span class="n">t</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="zoom.component.Component.render">
<code class="descname">render</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.component.Component.render" title="Permalink to this definition">¶</a></dt>
<dd><p>renders the component</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="zoom.component.component">
<code class="descclassname">zoom.component.</code><code class="descname">component</code><a class="headerlink" href="#zoom.component.component" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="api/zoom.component.html#zoom.component.Component" title="zoom.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoom.component.Component</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="zoom.component.compose">
<code class="descclassname">zoom.component.</code><code class="descname">compose</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.component.compose" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose a response - DEPRECATED</p>
</dd></dl>

<dl class="function">
<dt id="zoom.component.handler">
<code class="descclassname">zoom.component.</code><code class="descname">handler</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.component.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Component handler</p>
</dd></dl>

</div>
<div class="section" id="module-zoom.components">
<span id="zoom-components-module"></span><h2>zoom.components module<a class="headerlink" href="#module-zoom.components" title="Permalink to this headline">¶</a></h2>
<p>zoom.components</p>
<dl class="class">
<dt id="zoom.components.HeaderBar">
<em class="property">class </em><code class="descclassname">zoom.components.</code><code class="descname">HeaderBar</code><span class="sig-paren">(</span><em>model=None</em>, <em>**k</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.HeaderBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="api_set4.html#zoom.mvc.DynamicView" title="zoom.mvc.DynamicView"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoom.mvc.DynamicView</span></code></a></p>
<p>Header Bar</p>
<p>A horizontal header bar with a left and right content sections.  Useful
for section headers that may contain actions or other features.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="n">HeaderBar</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;Left Part&#39;</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="s1">&#39;Right Part&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="go">&lt;div class=&quot;header-container&quot;&gt;</span>
<span class="go">    &lt;div class=&quot;header-bar clearfix&quot;&gt;</span>
<span class="go">        &lt;div class=&quot;header-bar-left&quot;&gt;</span>
<span class="go">            Left Part</span>
<span class="go">        &lt;/div&gt;</span>
<span class="go">        &lt;div class=&quot;header-bar-right&quot;&gt;</span>
<span class="go">            Right Part</span>
<span class="go">        &lt;/div&gt;</span>
<span class="go">    &lt;/div&gt;</span>
<span class="go">&lt;/div&gt;</span>
<span class="go">&lt;BLANKLINE&gt;</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="zoom.components.HeaderBar.left">
<code class="descname">left</code><em class="property"> = ''</em><a class="headerlink" href="#zoom.components.HeaderBar.left" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="zoom.components.HeaderBar.right">
<code class="descname">right</code><em class="property"> = ''</em><a class="headerlink" href="#zoom.components.HeaderBar.right" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="zoom.components.Link">
<em class="property">class </em><code class="descclassname">zoom.components.</code><code class="descname">Link</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.Link" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="function">
<dt id="zoom.components.as_actions">
<code class="descclassname">zoom.components.</code><code class="descname">as_actions</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.as_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>returns actions</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zoom.context</span> <span class="k">import</span> <span class="n">context</span> <span class="k">as</span> <span class="n">ctx</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctx</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_actions</span><span class="p">([</span><span class="s1">&#39;New&#39;</span><span class="p">])</span>
<span class="go">&#39;&lt;div class=&quot;actions&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;a class=&quot;action&quot; href=&quot;&lt;dz:request_path&gt;/new&quot; id=&quot;new-action&quot;&gt;New&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_actions</span><span class="p">([</span><span class="s1">&#39;New&#39;</span><span class="p">,</span><span class="s1">&#39;Delete&#39;</span><span class="p">])</span>
<span class="go">&#39;&lt;div class=&quot;actions&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;a class=&quot;action&quot; href=&quot;&lt;dz:request_path&gt;/delete&quot; id=&quot;delete-action&quot;&gt;Delete&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a class=&quot;action&quot; href=&quot;&lt;dz:request_path&gt;/new&quot; id=&quot;new-action&quot;&gt;New&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.components.as_links">
<code class="descclassname">zoom.components.</code><code class="descname">as_links</code><span class="sig-paren">(</span><em>items</em>, <em>select=None</em>, <em>filter=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.as_links" title="Permalink to this definition">¶</a></dt>
<dd><p>generate an unordered list of links</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_links</span><span class="p">([</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">])</span>
<span class="go">&#39;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;&lt;dz:app_url&gt;&quot;&gt;one&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;&lt;dz:app_url&gt;/two&quot;&gt;two&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_links</span><span class="p">([(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;/1&#39;</span><span class="p">),</span> <span class="s1">&#39;two&#39;</span><span class="p">])</span>
<span class="go">&#39;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/1&quot;&gt;one&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;&lt;dz:app_url&gt;/two&quot;&gt;two&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_links</span><span class="p">([(</span><span class="s1">&#39;uno&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;/1&#39;</span><span class="p">),</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span> <span class="n">select</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s1">&#39;uno&#39;</span><span class="p">)</span>
<span class="go">&#39;&lt;ul&gt;&lt;li class=&quot;active&quot;&gt;&lt;a class=&quot;active&quot; href=&quot;/1&quot;&gt;one&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;&lt;dz:app_url&gt;/two&quot;&gt;two&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">as_links</span><span class="p">([</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span> <span class="n">select</span><span class="o">=</span><span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s1">&#39;two&#39;</span><span class="p">)</span>
<span class="go">&#39;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;&lt;dz:app_url&gt;&quot;&gt;one&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;active&quot;&gt;&lt;a class=&quot;active&quot; href=&quot;&lt;dz:app_url&gt;/two&quot;&gt;two&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.components.dropzone">
<code class="descclassname">zoom.components.</code><code class="descname">dropzone</code><span class="sig-paren">(</span><em>url</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.dropzone" title="Permalink to this definition">¶</a></dt>
<dd><p>Dropzone component</p>
<p>A basic dropzone component that supports drag and drop uploading
of files which are posted to the URL provided.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">packages</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">packages</span><span class="o">=</span><span class="p">{}))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">dropzone</span><span class="p">(</span><span class="s1">&#39;/app/files&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">zoom</span><span class="o">.</span><span class="n">Component</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.components.error">
<code class="descclassname">zoom.components.</code><code class="descname">error</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.error" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zoom.components.spinner">
<code class="descclassname">zoom.components.</code><code class="descname">spinner</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.spinner" title="Permalink to this definition">¶</a></dt>
<dd><p>A progress spinner</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">spinner</span><span class="p">(),</span> <span class="nb">str</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.components.success">
<code class="descclassname">zoom.components.</code><code class="descname">success</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="zoom.components.warning">
<code class="descclassname">zoom.components.</code><code class="descname">warning</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.components.warning" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-zoom.instances">
<span id="zoom-instances-module"></span><h2>zoom.instances module<a class="headerlink" href="#module-zoom.instances" title="Permalink to this headline">¶</a></h2>
<p>zoom.instances</p>
<p>Mananage zoom instances</p>
<p>Note: Experimental!</p>
<dl class="class">
<dt id="zoom.instances.Instance">
<em class="property">class </em><code class="descclassname">zoom.instances.</code><code class="descname">Instance</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.instances.Instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Zoom Instance</p>
<p>A Zoom instance is a directory containing sites, apps and
themes.  Zoom can host multiples sites using the same
configuration under a single Instance.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="s1">&#39;fakeinstance&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">instance_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;sites&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">sites</span> <span class="o">==</span> <span class="p">{}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="method">
<dt id="zoom.instances.Instance.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.instances.Instance.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new instance</p>
</dd></dl>

<dl class="method">
<dt id="zoom.instances.Instance.destroy">
<code class="descname">destroy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.instances.Instance.destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy an empty instance</p>
</dd></dl>

<dl class="method">
<dt id="zoom.instances.Instance.run_background_jobs">
<code class="descname">run_background_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.instances.Instance.run_background_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Run background jobs</p>
<p>Iterates through the sites in the instance and calls
run_background_jobs on each one.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">run_background_jobs</span><span class="p">()</span>
<span class="go">localhost</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="zoom.instances.Instance.sites">
<code class="descname">sites</code><a class="headerlink" href="#zoom.instances.Instance.sites" title="Permalink to this definition">¶</a></dt>
<dd><p>a dict of sites for the instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">sites</span><span class="p">)</span>
<span class="go">{&#39;localhost&#39;: Site(&#39;localhost&#39;)}</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="s1">&#39;fakeinstance&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">instance_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">got_it</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">instance</span><span class="o">.</span><span class="n">sites</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">InstanceMissingException</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">got_it</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">got_it</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="zoom.instances.Instance.sites_path">
<code class="descname">sites_path</code><a class="headerlink" href="#zoom.instances.Instance.sites_path" title="Permalink to this definition">¶</a></dt>
<dd><p>the path to the sites of the instance</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance_directory</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">zoompath</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">instance_directory</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">sites_path</span> <span class="o">==</span> <span class="n">instance_directory</span> <span class="o">+</span> <span class="s1">&#39;/sites&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="zoom.instances.InstanceExistsException">
<em class="property">exception </em><code class="descclassname">zoom.instances.</code><code class="descname">InstanceExistsException</code><a class="headerlink" href="#zoom.instances.InstanceExistsException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Instance directory exists</p>
</dd></dl>

<dl class="exception">
<dt id="zoom.instances.InstanceMissingException">
<em class="property">exception </em><code class="descclassname">zoom.instances.</code><code class="descname">InstanceMissingException</code><a class="headerlink" href="#zoom.instances.InstanceMissingException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Instance directory is missing</p>
</dd></dl>

</div>
<div class="section" id="module-zoom.migrations">
<span id="zoom-migrations-module"></span><h2>zoom.migrations module<a class="headerlink" href="#module-zoom.migrations" title="Permalink to this headline">¶</a></h2>
<p>zoom.migrations</p>
<p>Work in progress - experimental</p>
<dl class="class">
<dt id="zoom.migrations.Migration">
<em class="property">class </em><code class="descclassname">zoom.migrations.</code><code class="descname">Migration</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.Migration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Provies the methods to apply or revert transformations
to get system to a desired state.</p>
<dl class="method">
<dt id="zoom.migrations.Migration.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.Migration.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>apply changes to the database</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.migrations.Migration.name">
<code class="descname">name</code><a class="headerlink" href="#zoom.migrations.Migration.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="zoom.migrations.Migration.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.Migration.revert" title="Permalink to this definition">¶</a></dt>
<dd><p>Revert changes to the database</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zoom.migrations.Migrations">
<em class="property">class </em><code class="descclassname">zoom.migrations.</code><code class="descname">Migrations</code><span class="sig-paren">(</span><em>db</em>, <em>steps</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.Migrations" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>performs the migration steps needed to get to the target version</p>
<p>Systems are migrated from one state to another by providing a sequence
of steps typically subclassed from the Migration class.  Migrations
should provide both an apply method to peform a transformation to take a
system to a desired state and, where possible, a revert method to undo the
transformation to transform the sytem back to its original state.</p>
<p>As they are applied and reverted, the migrations are tracked in a
data store including the name of the object peforming the migration (
usually a subclass of Migration) the version of the system that was
attained by applying or reverting the migration, the revision number
of the migration (an integer representing the application or reversion
of a transformation), the method used (apply or revert) and the timestamp
of when the migration took place.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">AddFaxColumnToUser</span><span class="p">(</span><span class="n">Migration</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;alter table users add column fax char(30)&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">revert</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;alter table users drop column fax&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">steps</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">StartMigration</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">AddFaxColumnToUser</span><span class="p">,</span>
<span class="gp">... </span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">setup_test</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;describe users&#39;</span><span class="p">))</span>
<span class="go">Field      Type             Null Key Default Extra</span>
<span class="go">---------- ---------------- ---- --- ------- --------------</span>
<span class="go">id         int(10) unsigned NO   PRI None    auto_increment</span>
<span class="go">username   char(50)         NO   UNI None</span>
<span class="go">password   varchar(125)     YES      None</span>
<span class="go">first_name char(40)         YES      None</span>
<span class="go">last_name  char(40)         YES      None</span>
<span class="go">email      char(60)         YES  MUL None</span>
<span class="go">phone      char(30)         YES      None</span>
<span class="go">created    datetime         YES      None</span>
<span class="go">updated    datetime         YES      None</span>
<span class="go">last_seen  datetime         YES  MUL None</span>
<span class="go">created_by int(10) unsigned YES      None</span>
<span class="go">updated_by int(10) unsigned YES      None</span>
<span class="go">status     char(1)          YES      None</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">migrations</span> <span class="o">=</span> <span class="n">Migrations</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">db</span><span class="p">,</span> <span class="n">steps</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">migrations</span><span class="o">.</span><span class="n">migrate</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;describe users&#39;</span><span class="p">))</span>
<span class="go">Field      Type             Null Key Default Extra</span>
<span class="go">---------- ---------------- ---- --- ------- --------------</span>
<span class="go">id         int(10) unsigned NO   PRI None    auto_increment</span>
<span class="go">username   char(50)         NO   UNI None</span>
<span class="go">password   varchar(125)     YES      None</span>
<span class="go">first_name char(40)         YES      None</span>
<span class="go">last_name  char(40)         YES      None</span>
<span class="go">email      char(60)         YES  MUL None</span>
<span class="go">phone      char(30)         YES      None</span>
<span class="go">created    datetime         YES      None</span>
<span class="go">updated    datetime         YES      None</span>
<span class="go">last_seen  datetime         YES  MUL None</span>
<span class="go">created_by int(10) unsigned YES      None</span>
<span class="go">updated_by int(10) unsigned YES      None</span>
<span class="go">status     char(1)          YES      None</span>
<span class="go">fax        char(30)         YES      None</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">migrations</span><span class="o">.</span><span class="n">migrate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">site</span><span class="o">.</span><span class="n">db</span><span class="p">(</span><span class="s1">&#39;describe users&#39;</span><span class="p">))</span>
<span class="go">Field      Type             Null Key Default Extra</span>
<span class="go">---------- ---------------- ---- --- ------- --------------</span>
<span class="go">id         int(10) unsigned NO   PRI None    auto_increment</span>
<span class="go">username   char(50)         NO   UNI None</span>
<span class="go">password   varchar(125)     YES      None</span>
<span class="go">first_name char(40)         YES      None</span>
<span class="go">last_name  char(40)         YES      None</span>
<span class="go">email      char(60)         YES  MUL None</span>
<span class="go">phone      char(30)         YES      None</span>
<span class="go">created    datetime         YES      None</span>
<span class="go">updated    datetime         YES      None</span>
<span class="go">last_seen  datetime         YES  MUL None</span>
<span class="go">created_by int(10) unsigned YES      None</span>
<span class="go">updated_by int(10) unsigned YES      None</span>
<span class="go">status     char(1)          YES      None</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">migrations</span><span class="o">.</span><span class="n">revisions</span><span class="o">.</span><span class="n">zap</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="zoom.migrations.Migrations.migrate">
<code class="descname">migrate</code><span class="sig-paren">(</span><em>target=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.Migrations.migrate" title="Permalink to this definition">¶</a></dt>
<dd><p>migrate to a target version</p>
<p>Target is the desired version.  If no target is supplied the
migrations required to get to the most up to date version are
applied.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zoom.migrations.StartMigration">
<em class="property">class </em><code class="descclassname">zoom.migrations.</code><code class="descname">StartMigration</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.migrations.StartMigration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="api/zoom.migrations.html#zoom.migrations.Migration" title="zoom.migrations.Migration"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoom.migrations.Migration</span></code></a></p>
<p>Start Migration</p>
<p>This is a starting state migration.  It serves as a starting point
for the system before any migrations were applied and does not
itself apply any data transformations.  This migration should be used
as the first element of all migration sequences.</p>
<p>In theory, migrating back to this state should put the database back
into its original state.  By “in theory” we mean that assuming all
of the applied migrations are completely revertable which may not
be the case in all cases.</p>
</dd></dl>

<dl class="class">
<dt id="zoom.migrations.SystemMigrationRecord">
<em class="property">class </em><code class="descclassname">zoom.migrations.</code><code class="descname">SystemMigrationRecord</code><a class="headerlink" href="#zoom.migrations.SystemMigrationRecord" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="api_set1.html#zoom.utils.Record" title="zoom.utils.Record"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoom.utils.Record</span></code></a></p>
<p>Migration Record</p>
</dd></dl>

</div>
<div class="section" id="module-zoom.middleware">
<span id="zoom-middleware-module"></span><h2>zoom.middleware module<a class="headerlink" href="#module-zoom.middleware" title="Permalink to this headline">¶</a></h2>
<p>zoom.middleware</p>
<p>A set of functions that can be placed between the HTTP server and
the application layer.  These functions can provide various services
such as content serving, caching, error trapping, security, etc..</p>
<dl class="function">
<dt id="zoom.middleware.capture_stdout">
<code class="descclassname">zoom.middleware.</code><code class="descname">capture_stdout</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.capture_stdout" title="Permalink to this definition">¶</a></dt>
<dd><p>Capture printed output for debugging purposes</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_content</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hey&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">zoom</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">HTMLResponse</span><span class="p">(</span><span class="s1">&#39;I said {*stdout*}&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">capture_stdout</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">get_content</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">&#39;I said hey\n&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.check_csrf">
<code class="descclassname">zoom.middleware.</code><code class="descname">check_csrf</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.check_csrf" title="Permalink to this definition">¶</a></dt>
<dd><p>Check csrf token</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">providers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">csrf_token</span><span class="o">=</span><span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Pat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">check_csrf</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">zoom</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">RedirectResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">csrf_token</span><span class="o">=</span><span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Pat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">csrf_token</span><span class="o">=</span><span class="s1">&#39;4321&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">check_csrf</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">zoom</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">RedirectResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">csrf_token</span><span class="o">=</span><span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Pat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">csrf_token</span><span class="o">=</span><span class="s1">&#39;1234&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">check_csrf</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">zoom</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">RedirectResponse</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.debug">
<code class="descclassname">zoom.middleware.</code><code class="descname">debug</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Debugging page</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">debug</span><span class="p">(</span><span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">)))</span>
<span class="go">&lt;class &#39;zoom.response.HTMLResponse&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.display_errors">
<code class="descclassname">zoom.middleware.</code><code class="descname">display_errors</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.display_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Display errors for developers</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">templates_paths</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">site</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;admin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">throw</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;ouch!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">display_errors</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">throw</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HTMLResponse</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_admin</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">display_errors</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">throw</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HTMLResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.get_csrf_token">
<code class="descclassname">zoom.middleware.</code><code class="descname">get_csrf_token</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.get_csrf_token" title="Permalink to this definition">¶</a></dt>
<dd><p>generate a csrf token</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s1">&#39;csrf_token&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">bool</span><span class="p">(</span><span class="n">get_csrf_token</span><span class="p">(</span><span class="n">session</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s1">&#39;csrf_token&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">form_for</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="s1">&#39;csrf_token&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.handle">
<code class="descclassname">zoom.middleware.</code><code class="descname">handle</code><span class="sig-paren">(</span><em>request</em>, <em>handlers=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>handle a request</p>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.not_found">
<code class="descclassname">zoom.middleware.</code><code class="descname">not_found</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.not_found" title="Permalink to this definition">¶</a></dt>
<dd><p>return a 404 page for site</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">theme</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;My Site&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">site</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">not_found</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status</span>
<span class="go">&#39;404 Not Found&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.reset_modules">
<code class="descclassname">zoom.middleware.</code><code class="descname">reset_modules</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.reset_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>reset the modules to a known starting set</p>
<p>Memorizes the modules in use on the first round.  Then
on every subsequent round, it removes any extra modules
before passing the request on.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">loader</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">zoom.audit</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">not_a_loader</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="s1">&#39;zoom.audit&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">del</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;zoom.audit&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fresh</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reset_modules</span><span class="p">(</span><span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">),</span> <span class="n">loader</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fresh</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">reset_modules</span><span class="p">(</span><span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">),</span> <span class="n">not_a_loader</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fresh</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_favicon">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_favicon</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_favicon" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a favicon file</p>
<p>This function only handles the case where the favicon
reference is /favicon.ico, as would be typical in a local
dev environment.  For production environments the favicon
would typically be either part of the theme or would
be stored statically, both of which would typically be
served up by your proxy or your web server depending on
your config.</p>
<p>If your web sever is not configured to handle static or
themes for you, Zoom will happily serve them up via
the serve_theme or serve_static middleware found
elsewhere in this module.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zoom.request</span> <span class="k">import</span> <span class="n">Request</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">content_handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s1">&#39;200 OK&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="s1">&#39;nuthin&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">REQUEST_URI</span><span class="o">=</span><span class="s1">&#39;/favicon.ico&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_favicon</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">request</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">content_handler</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">ICOResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">dict</span><span class="p">(</span><span class="n">REQUEST_URI</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">serve_favicon</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">request</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">content_handler</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span>
<span class="go">&#39;nuthin&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_html">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_html</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_html" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve HTML from the Content app</p>
<p>Direct a request for an HTML page to the content app</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/index.html&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s1">&#39;/index.html&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_html</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s1">&#39;/content/index.html&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/index.css&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s1">&#39;/index.css&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_html</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s1">&#39;/index.css&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_images">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_images</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve an image file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/images/banner_logo.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_images</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">PNGResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/notimages/banner_logo.png&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serve_images</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_redirects">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_redirects</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_redirects" title="Permalink to this definition">¶</a></dt>
<dd><p>Serves redirects</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_redirects</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">Bunch</span><span class="p">(</span><span class="n">abs_url</span><span class="o">=</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">redirect_home</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">RedirectResponse</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_redirects</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">redirect_home</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
<span class="go">OrderedDict([(&#39;Location&#39;, &#39;/home&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_response">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_response</code><span class="sig-paren">(</span><em>*path</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve up various respones with their correct response type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom_js</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">zoompath</span><span class="p">(</span><span class="s1">&#39;web/www/static/zoom/zoom.js&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_response</span><span class="p">(</span><span class="n">zoom_js</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">JavascriptResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom_path</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">zoompath</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_response</span><span class="p">(</span><span class="n">zoom_path</span><span class="p">,</span> <span class="s1">&#39;www/static/zoom/nada.js&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">JavascriptResponse</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">&quot;file not found: &#39;www/static/zoom/nada.js&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status</span>
<span class="go">&#39;404 Not Found&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">zoom_path</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">zoompath</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">serve_response</span><span class="p">(</span><span class="n">zoom_path</span><span class="p">,</span> <span class="s1">&#39;www/static/zoom/images&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">JavascriptResponse</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">&quot;unknown file type &#39;&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status</span>
<span class="go">&#39;415 Unsupported Media Type&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_static">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_static</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_static" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a static file</p>
<p>Static files can be served in serveral ways.  This particular
middleware intended to be inserted into the middleware stack
near the front before most other things.  The reason being is
that in many cases the static files are not site specific or
app specific but rather are shared by the entire instance.  In
addition, many times static files require no authorization or
special rights.  This means that in many cases static files
can be served without knowing who is asking or what site they
are for.  That is what this middleware does.</p>
<p>This handler is mainly intended for development purposes as
in a production evironment this type of content would typically
be served up by the HTTP server or a caching layer.</p>
<p>Note: This layer looks in four separate places for static files
to serve.  Three related to the zoom instance, and one, as a last
resort, from the zoom library itself.  If you are concerned
about exposing the wrong files, be careful what you put in those
directories or better yet, use a proxy.</p>
<p>In addition to this instance wide static serving Sites and Apps
may implement static file serving.  If they do, this layer is
unaware of that fact.</p>
<p>The locations this handler will look are relative to the zoom
instance. They are:</p>
<blockquote>
<div>&lt;instance&gt;/static
&lt;instance&gt;/www/static
&lt;instance&gt;/../static
zoom/web/www/static</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/static/zoom/zoom.js&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_static</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">JavascriptResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/notstatic/zoom/zoom.js&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_static</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">JavascriptResponse</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.serve_themes">
<code class="descclassname">zoom.middleware.</code><code class="descname">serve_themes</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.serve_themes" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a theme file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/themes/default/css/style.css&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">sites</span><span class="o">.</span><span class="n">Site</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">serve_themes</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">CSSResponse</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/notthemes/default/default.html&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">zoom</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serve_themes</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.middleware.trap_errors">
<code class="descclassname">zoom.middleware.</code><code class="descname">trap_errors</code><span class="sig-paren">(</span><em>request</em>, <em>handler</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.middleware.trap_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Trap exceptions and raise a server error</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">exception_handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;error!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">content_handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">HTMLResponse</span><span class="p">(</span><span class="s1">&#39;nuthin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">trap_errors</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">content_handler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">as_wsgi</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span>
<span class="go">b&#39;nuthin&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span>
<span class="go">&#39;200 OK&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">trap_errors</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">exception_handler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">as_wsgi</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">status</span>
<span class="go">&#39;500 Internal Server Error&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Exception: error!&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-zoom.request">
<span id="zoom-request-module"></span><h2>zoom.request module<a class="headerlink" href="#module-zoom.request" title="Permalink to this headline">¶</a></h2>
<p>zoom.request</p>
<p>Web requsets.</p>
<dl class="class">
<dt id="zoom.request.Request">
<em class="property">class </em><code class="descclassname">zoom.request.</code><code class="descname">Request</code><span class="sig-paren">(</span><em>env=None</em>, <em>instance=None</em>, <em>start_time=None</em>, <em>username=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A web request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost/test?name=joe&amp;age=40&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">body_consumed</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="s1">&#39;40&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;joe&#39;</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span> <span class="o">==</span> <span class="s1">&#39;/test&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">route</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">helpers</span><span class="p">()[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span>
<span class="go">&#39;localhost&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">method</span>
<span class="go">&#39;GET&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">port</span>
<span class="go">&#39;80&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">body</span> <span class="o">==</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">body_consumed</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="p">{}</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="zoom.request.Request.body">
<code class="descname">body</code><a class="headerlink" href="#zoom.request.Request.body" title="Permalink to this definition">¶</a></dt>
<dd><p>access the body in raw form</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.request.Request.data">
<code class="descname">data</code><a class="headerlink" href="#zoom.request.Request.data" title="Permalink to this definition">¶</a></dt>
<dd><p>access the body as data</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.request.Request.elapsed">
<code class="descname">elapsed</code><a class="headerlink" href="#zoom.request.Request.elapsed" title="Permalink to this definition">¶</a></dt>
<dd><p>Elapsed time</p>
</dd></dl>

<dl class="method">
<dt id="zoom.request.Request.helpers">
<code class="descname">helpers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.Request.helpers" title="Permalink to this definition">¶</a></dt>
<dd><p>provide helpers</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.request.Request.json_body">
<code class="descname">json_body</code><a class="headerlink" href="#zoom.request.Request.json_body" title="Permalink to this definition">¶</a></dt>
<dd><p>access and parse the body as json</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.request.Request.parent_path">
<code class="descname">parent_path</code><a class="headerlink" href="#zoom.request.Request.parent_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path of resource parent</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zoom.request.build">
<code class="descclassname">zoom.request.</code><code class="descname">build</code><span class="sig-paren">(</span><em>url</em>, <em>data=None</em>, <em>instance_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a request object</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">host</span>
<span class="go">&#39;localhost&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://testsite.local:8000/info&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">host</span>
<span class="go">&#39;testsite.local&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">port</span>
<span class="go">8000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/info&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="n">build</span><span class="p">(</span><span class="s1">&#39;http://localhost/hello&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/hello&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">build</span><span class="p">(</span><span class="s1">&#39;https://localhost/hello?name=Sally&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">{&#39;name&#39;: &#39;Sally&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.request.calc_domain">
<code class="descclassname">zoom.request.</code><code class="descname">calc_domain</code><span class="sig-paren">(</span><em>host</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.calc_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate just the high level domain part of the host name</p>
<p>Remove the port and the www. if it exists.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_domain</span><span class="p">(</span><span class="s1">&#39;www.dsilabs.ca:8000&#39;</span><span class="p">)</span>
<span class="go">&#39;dsilabs.ca&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_domain</span><span class="p">(</span><span class="s1">&#39;test.dsilabs.ca:8000&#39;</span><span class="p">)</span>
<span class="go">&#39;test.dsilabs.ca&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.request.get_instance">
<code class="descclassname">zoom.request.</code><code class="descname">get_instance</code><span class="sig-paren">(</span><em>directory</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.get_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Figures out which instance to run</p>
<p>This function will first check to see if the instance directory passed
contains a sites directory, the miniumum bar to be considered an instance
directory.  If so, it returns it’s absolute path.</p>
<p>If not, it will attempt to locate a Zoom configuration file which
specifies the instance path.</p>
<p>If none of the above methods succeed it raises an exception.</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.get_library_instance">
<code class="descclassname">zoom.request.</code><code class="descname">get_library_instance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.get_library_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>get the location of the library instance</p>
<p>If the user doesn’t provide an instance whith which to
run the server then the request assumes the user wants
to run using the built-in instance.  This is most common
in development environments.</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.get_parent_dir">
<code class="descclassname">zoom.request.</code><code class="descname">get_parent_dir</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.get_parent_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>get the directory above the current directory</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.get_web_vars">
<code class="descclassname">zoom.request.</code><code class="descname">get_web_vars</code><span class="sig-paren">(</span><em>env</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.get_web_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>return web parameters as a dict</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.handler">
<code class="descclassname">zoom.request.</code><code class="descname">handler</code><span class="sig-paren">(</span><em>request</em>, <em>handle</em>, <em>*rest</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>request handler</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.make_request_id">
<code class="descclassname">zoom.request.</code><code class="descname">make_request_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.make_request_id" title="Permalink to this definition">¶</a></dt>
<dd><p>make a unique request id</p>
</dd></dl>

<dl class="function">
<dt id="zoom.request.strim">
<code class="descclassname">zoom.request.</code><code class="descname">strim</code><span class="sig-paren">(</span><em>url</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.request.strim" title="Permalink to this definition">¶</a></dt>
<dd><p>trim off the trailing ‘/’ character if there is one</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">strim</span><span class="p">(</span><span class="s1">&#39;http://localhost/&#39;</span><span class="p">)</span>
<span class="go">&#39;http://localhost&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-zoom.server">
<span id="zoom-server-module"></span><h2>zoom.server module<a class="headerlink" href="#module-zoom.server" title="Permalink to this headline">¶</a></h2>
<p>zoom.server</p>
<p>runs an instance of Zoom using the builtin Python WSGI server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">server</span> <span class="o">=</span> <span class="n">WSGIApplication</span><span class="p">()</span>
</pre></div>
</div>
<dl class="class">
<dt id="zoom.server.WSGIApplication">
<em class="property">class </em><code class="descclassname">zoom.server.</code><code class="descname">WSGIApplication</code><span class="sig-paren">(</span><em>instance='.'</em>, <em>handlers=None</em>, <em>username=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.WSGIApplication" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>a WSGI Application wrapper</p>
</dd></dl>

<dl class="class">
<dt id="zoom.server.ZoomWSGIRequestHandler">
<em class="property">class </em><code class="descclassname">zoom.server.</code><code class="descname">ZoomWSGIRequestHandler</code><span class="sig-paren">(</span><em>request</em>, <em>client_address</em>, <em>server</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.ZoomWSGIRequestHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.simple_server.WSGIRequestHandler</span></code></p>
<dl class="method">
<dt id="zoom.server.ZoomWSGIRequestHandler.log_message">
<code class="descname">log_message</code><span class="sig-paren">(</span><em>fmt</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.ZoomWSGIRequestHandler.log_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Log an arbitrary message.</p>
<p>This is used by all other logging functions.  Override
it if you have specific logging wishes.</p>
<p>The first argument, FORMAT, is a format string for the
message to be logged.  If the format string contains
any % escapes requiring parameters, they should be
specified as subsequent arguments (it’s just like
printf!).</p>
<p>The client ip and current date/time are prefixed to
every message.</p>
</dd></dl>

<dl class="attribute">
<dt id="zoom.server.ZoomWSGIRequestHandler.logger">
<code class="descname">logger</code><em class="property"> = &lt;Logger zoom.server (WARNING)&gt;</em><a class="headerlink" href="#zoom.server.ZoomWSGIRequestHandler.logger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="zoom.server.application">
<code class="descclassname">zoom.server.</code><code class="descname">application</code><span class="sig-paren">(</span><em>environ</em>, <em>start_response</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.application" title="Permalink to this definition">¶</a></dt>
<dd><p>run Zoom using external WSGI Server</p>
<p>Assumes that the WSGI script is located one directory below the instance
directory.  In an typical installation the instance directory would be
/work/web and the WSGI script would be located in /work/web/www.</p>
<p>If you need to launch from somewhere else just build a function like this
of your own and create the WSGIApplication instance using a path of your
choosing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">save_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">env</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">DOCUMENT_ROOT</span><span class="o">=</span><span class="n">zoom</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">zoompath</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">,</span> <span class="s1">&#39;www&#39;</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">response</span> <span class="o">=</span> <span class="n">application</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">... </span><span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">save_dir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="zoom.server.debug">
<code class="descclassname">zoom.server.</code><code class="descname">debug</code><span class="sig-paren">(</span><em>environ</em>, <em>start_response</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration Debugging App</p>
</dd></dl>

<dl class="function">
<dt id="zoom.server.reset_modules">
<code class="descclassname">zoom.server.</code><code class="descname">reset_modules</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.reset_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>reset the modules to a known starting set</p>
<p>memorizes the modules currently in use and then removes any other
modules when called again</p>
</dd></dl>

<dl class="function">
<dt id="zoom.server.run">
<code class="descclassname">zoom.server.</code><code class="descname">run</code><span class="sig-paren">(</span><em>port=80</em>, <em>instance=None</em>, <em>handlers=None</em>, <em>username=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.run" title="Permalink to this definition">¶</a></dt>
<dd><p>run using internal HTTP Server</p>
<p>The instance variable is the path of the directory on the system where the
sites folder is located. (e.g. /work/web)</p>
</dd></dl>

<dl class="function">
<dt id="zoom.server.run_as_cgi">
<code class="descclassname">zoom.server.</code><code class="descname">run_as_cgi</code><span class="sig-paren">(</span><em>environ=None</em>, <em>instance=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.server.run_as_cgi" title="Permalink to this definition">¶</a></dt>
<dd><p>Run Zoom as a CGI script</p>
</dd></dl>

</div>
<div class="section" id="module-zoom.services">
<span id="zoom-services-module"></span><h2>zoom.services module<a class="headerlink" href="#module-zoom.services" title="Permalink to this headline">¶</a></h2>
<p>zoom.services</p>
<p>background services</p>
<dl class="function">
<dt id="zoom.services.run">
<code class="descclassname">zoom.services.</code><code class="descname">run</code><span class="sig-paren">(</span><em>command</em>, <em>returncode=False</em>, <em>location=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zoom.services.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a shell command and return the response as a string</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;echo testing&quot;</span><span class="p">)</span>
<span class="go">&#39;testing\n&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;echo testing&quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="go">&#39;testing\n&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Dynamic Solutions Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>